install.packages("ImportExport")
library(ImportExport)
pkgs <- c("tidyverse", "readxl")
for(pkg in pkgs) {
if(!require(pkg, character.only = TRUE)) {
install.packages(pkg)
library(pkg, character.only = TRUE)
}
library(pkg, character.only = TRUE)
}
valuesets <- read.csv("C:/Users/kaloisio/Documents/IPEDS data/valuesets_compiled.csv")
warnings()
valuesets <- read.csv("C:/Users/kaloisio/Documents/IPEDS data/valuesets_compiled.csv")
names(valuesets)
longtable <- read.csv(path = "C:/Users/kaloisio/Documents/IPEDS data/EF_A_compiled.csv")
longtable <- read.csv("C:/Users/kaloisio/Documents/IPEDS data/EF_A_compiled.csv")
longtable <- read.csv("C:/Users/kaloisio/Documents/IPEDS data/EF_A_compiled.csv", stringsAsFactors = F)
valuesets <- read.csv("C:/Users/kaloisio/Documents/IPEDS data/valuesets_compiled.csv", stringsAsFactors = F)
names(valuesets)
names(longtable)
table(valuesets$varName)
table(names(longtable)%in%valuesets$varName)
names(longtable)[names(longtable)%in%valuesets$varName]
dput(names(longtable)[names(longtable)%in%valuesets$varName]
)
valueset_EFA <- valuesets %>% filter(varName%in%c("EFALEVEL", "LINE", "SECTION", "LSTUDY"))
View(valueset_EFA)
head(valueset)
head(valuesets)
View(valueset_EFA)
valueset_EFA <- valuesets %>%
filter(Tablenumber==21,
varName%in%c("EFALEVEL", "LINE", "SECTION", "LSTUDY"))
View(valueset_EFA)
table(valueset_EFA$TableName)
table(valueset_EFA$varName)
table(valueset_EFA$varTitle)
names(longtable)
test <- longtable %>% gather(3:length(names(longtable)), "varName", "var_numeric")
length(names(longtable))
test <- longtable %>% gather("varName", "var_numeric",3:length(names(longtable)))
names(test)
head(test)
tail(test)
test <- longtable %>% gather("varName", "var_numeric", names(longtable)[names(longtable)%in%valuesets$varName])
View(test)
table(test$varName)
table(test$varName, test$var_numeric)
table(valueset_EFA$varName, valueset_EFA$Codevalue
)
table(test$varName, test$var_numeric, useNA = "a")
test <- longtable %>% gather("varName", "var_numeric", names(longtable)[names(longtable)%in%valueset_EFA$varName])
View(test)
ds <- longtable %>% gather("varName", "var_numeric", names(longtable)[names(longtable)%in%valueset_EFA$varName])
rm(test)
names(valueset_EFA)
ds_join <- left_join(ds, valueset_EFA)
names(valueset_EFA)
ds <- longtable %>% gather("varName", "Codevalue", names(longtable)[names(longtable)%in%valueset_EFA$varName])
pkgs <- c("tidyverse", "readxl")
for(pkg in pkgs) {
if(!require(pkg, character.only = TRUE)) {
install.packages(pkg)
library(pkg, character.only = TRUE)
}
library(pkg, character.only = TRUE)
}
longtable <- read.csv("C:/Users/kaloisio/Documents/IPEDS data/EF_A_compiled.csv", stringsAsFactors = F)
names(longtable)
valuesets <- read.csv("C:/Users/kaloisio/Documents/IPEDS data/valuesets_compiled.csv", stringsAsFactors = F)
names(valuesets)
table(valuesets$varName)
names(longtable)[names(longtable)%in%valuesets$varName]
valueset_EFA <- valuesets %>%
filter(Tablenumber==21,
varName%in%c("EFALEVEL", "LINE", "SECTION", "LSTUDY"))
names(longtable)
ds <- longtable %>% gather("varName", "Codevalue", names(longtable)[names(longtable)%in%valueset_EFA$varName])
longtable <- read.csv("C:/Users/kaloisio/Documents/IPEDS data/EF_A_compiled.csv", stringsAsFactors = F)
